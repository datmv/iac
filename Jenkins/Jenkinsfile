pipeline {
    agent any
    parameters {
        choice choices: ['node-1', 'node-2'], name: 'Name'
    }
    stages {
        stage('Clone Project') {
            steps {
                sh 'cd /home/jenkins/iac && git pull'
            }
        }
        stage('choose node name') {
            steps {
                script {
                    if (env.name == 'node-1') {
                        echo 'Dung node-1 roi'
                        ansiblePlaybook disableHostKeyChecking: true, installation: 'ansible', 
                        inventory: '/home/jenkins/iac/project/tests/inventory', 
                        playbook: '/home/jenkins/iac/playbook/test.yml'
                    } else {
                        echo 'Chon sai roi'
                    }
                }
            }
        }
    }
}
